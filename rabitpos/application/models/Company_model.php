<?php
 defined("\102\101\123\x45\x50\101\124\110") or die("\116\x6f\x20\x64\151\162\x65\143\x74\x20\163\x63\162\x69\x70\x74\40\x61\x63\143\145\x73\163\40\141\x6c\x6c\157\167\x65\144"); class Company_model extends CI_Model { public function get_details() { $data = $this->data; $subdomain_ = getPathFolder(); $query = $this->db->query("\x73\x65\x6c\x65\143\x74\40\52\40\x66\162\x6f\155\40\144\142\x5f\143\157\155\160\141\x6e\171\40\x6f\x72\144\x65\x72\x20\x62\171\x20\151\x64\40\141\x73\x63\40\x6c\x69\x6d\x69\164\40\61"); if ($query->num_rows() == 0) { show_404(); die; } else { $query = $query->row(); $data["\161\x5f\151\144"] = $query->id; $data["\143\157\155\x70\141\x6e\x79\137\x6e\x61\155\x65"] = $query->company_name; $data["\167\x65\x62\163\x69\x74\x65"] = $query->company_website; $data["\x6d\x6f\142\151\x6c\145"] = $query->mobile; $data["\160\x68\x6f\x6e\x65"] = $query->phone; $data["\145\155\141\151\154"] = $query->email; $data["\x63\157\x75\156\x74\162\171"] = $query->country; $data["\x73\164\x61\164\145"] = $query->state; $data["\143\151\164\x79"] = $query->city; $data["\x70\157\163\x74\x63\x6f\144\x65"] = $query->postcode; $data["\x61\144\144\162\145\x73\163"] = $query->address; $data["\x67\x73\x74\x69\156"] = $query->gst_no; $data["\166\x61\x74"] = $query->vat_no; $data["\x77\x65\x62\163\x69\x74\145"] = $query->website; $data["\x70\x61\156"] = $query->pan_no; $data["\142\141\x6e\x6b\x5f\x64\x65\164\x61\x69\154\x73"] = $query->bank_details; $data["\x75\160\x69\x5f\151\x64"] = $query->upi_id; $data["\x63\157\155\x70\141\x6e\x79\x5f\154\x6f\147\x6f"] = !empty($query->company_logo) ? $query->company_logo : base_url("\x74\150\x65\x6d\145\x2f\151\x6d\141\147\145\163\x2f\156\157\x5f\151\x6d\x61\147\145\x32\56\x70\x6e\x67"); $data["\x75\x70\151\x5f\x63\x6f\144\x65"] = !empty($query->upi_code) ? base_url("\165\160\154\157\141\x64\x73\57" . $subdomain_ . "\57\x63\x6f\x6d\x70\x61\156\x79\57" . $query->upi_code) : base_url("\x74\x68\145\155\145\x2f\151\x6d\x61\147\145\163\57\x6e\157\137\x69\x6d\x61\147\145\x32\x2e\x70\x6e\147"); $data["\163\x69\147\156\x61\x74\x75\162\145"] = !empty($query->signature) ? $query->signature : base_url("\x74\150\x65\x6d\x65\x2f\151\155\x61\147\145\x73\x2f\x6e\157\x69\x6d\x61\x67\x65\56\x70\156\147"); $data["\163\x68\x6f\167\137\x73\151\x67\x6e\x61\x74\165\162\145"] = $query->show_signature; return $data; } } public function update_company() { extract($this->security->xss_clean(html_escape(array_merge($this->data, $_POST)))); $subdomain_ = getPathFolder(); $config["\x6c\157\143\141\x6c\137\x70\x61\x74\x68"] = "\x2e\57\165\x70\x6c\157\x61\144\163\57" . $subdomain_ . "\x2f"; if (!is_dir($config["\x6c\157\x63\x61\x6c\x5f\x70\141\x74\150"])) { if (mkdir($config["\154\x6f\143\141\x6c\137\160\141\x74\150"], 493, true)) { } } $config["\x6c\x6f\x63\141\x6c\x5f\160\x61\164\150\137\x32"] = "\56\x2f\165\x70\154\157\x61\x64\163\57" . $subdomain_ . "\x2f\143\157\155\160\x61\x6e\171\57"; if (!is_dir($config["\154\x6f\143\x61\154\x5f\160\x61\164\x68\137\62"])) { if (mkdir($config["\154\x6f\143\141\x6c\x5f\x70\x61\164\x68\x5f\62"], 493, true)) { } } $company_logo = ''; if (!empty($_FILES["\x63\x6f\x6d\160\x61\156\171\x5f\154\157\x67\157"]["\156\x61\155\145"])) { $config["\x75\x70\x6c\x6f\x61\x64\137\x70\141\x74\x68"] = "\56\x2f\x75\160\x6c\x6f\x61\144\163\57" . $subdomain_ . "\x2f\x63\157\x6d\160\141\x6e\171\57"; $config["\141\x6c\154\x6f\x77\x65\144\x5f\x74\171\x70\x65\x73"] = "\x67\151\x66\x7c\152\x70\x67\x7c\160\156\147"; $config["\155\141\170\137\163\x69\x7a\x65"] = 1024; $config["\155\x61\x78\x5f\x77\x69\144\164\150"] = 1000; $config["\x6d\x61\x78\x5f\x68\145\151\147\150\x74"] = 1000; $this->load->library("\165\160\154\x6f\141\144", $config); if (!$this->upload->do_upload("\143\x6f\155\160\x61\x6e\171\x5f\x6c\x6f\x67\x6f")) { $error = array("\145\x72\162\157\162" => $this->upload->display_errors()); print $error["\x65\x72\x72\157\x72"]; die; } else { $company_logo = $subdomain_ . "\57\143\157\x6d\x70\141\156\x79\57" . $this->upload->data("\x66\x69\154\x65\137\x6e\x61\155\x65"); $company_logo = "\40\x2c\143\x6f\155\160\141\156\171\x5f\154\157\x67\x6f\x3d\47{$company_logo}\x27\40"; } } $upi_code = ''; if (!empty($_FILES["\x75\160\x69\137\x63\x6f\144\x65"]["\x6e\x61\x6d\x65"])) { $config["\x75\160\x6c\x6f\141\144\x5f\160\141\164\150"] = "\56\x2f\x75\x70\154\157\141\144\163\x2f" . $subdomain_ . "\x2f\143\157\x6d\160\x61\x6e\171\x2f"; $config["\141\154\154\157\167\145\x64\x5f\164\171\160\x65\x73"] = "\x67\151\x66\x7c\x6a\x70\x67\174\x70\156\147"; $config["\x6d\x61\170\x5f\x73\x69\172\145"] = 1024; $config["\x6d\141\170\x5f\167\x69\144\x74\x68"] = 1000; $config["\155\x61\170\x5f\x68\x65\151\x67\150\x74"] = 1000; $this->load->library("\165\x70\x6c\x6f\141\144", $config); if (!$this->upload->do_upload("\x75\x70\151\x5f\143\157\x64\145")) { $error = array("\x65\x72\162\x6f\x72" => $this->upload->display_errors()); print $error["\145\162\x72\157\162"]; die; } else { $upi_code = $this->upload->data("\146\x69\x6c\x65\137\x6e\141\x6d\145"); $upi_code = "\x20\x2c\x75\x70\151\x5f\143\x6f\x64\145\x3d\x27{$upi_code}\47\x20"; } } $signature = ''; if (!empty($_FILES["\163\x69\147\156\141\164\x75\162\x65"]["\x6e\x61\155\145"])) { $config["\x75\x70\x6c\157\x61\144\x5f\x70\x61\x74\x68"] = "\x2e\57\165\x70\x6c\x6f\x61\x64\163\57" . $subdomain_ . "\57\x63\x6f\x6d\160\141\x6e\x79\57"; $config["\x61\x6c\154\x6f\167\145\144\137\x74\171\x70\x65\x73"] = "\x67\151\146\x7c\152\x70\147\x7c\x6a\x70\145\x67\x7c\160\156\x67"; $config["\x6d\141\x78\x5f\163\151\x7a\x65"] = 1000; $config["\x6d\x61\170\137\x77\x69\x64\x74\150"] = 1000; $config["\155\x61\170\x5f\150\145\x69\x67\150\164"] = 1000; $this->load->library("\165\160\154\157\141\x64", $config); if (!$this->upload->do_upload("\163\151\147\x6e\x61\164\165\162\145")) { $error = array("\x65\162\x72\x6f\162" => $this->upload->display_errors()); return $error["\145\162\x72\157\x72"]; die; } else { $signature = "\165\160\x6c\x6f\x61\x64\x73\57" . $subdomain_ . "\57\143\157\x6d\160\x61\156\171\57" . $this->upload->data("\x66\x69\154\x65\137\x6e\x61\x6d\145"); $signature = "\x20\54\163\151\147\x6e\x61\164\165\x72\x65\75\47{$signature}\47\40"; } } $show_signature = isset($show_signature) ? 1 : 0; $query1 = "\x75\x70\x64\141\x74\x65\x20\144\142\137\143\x6f\155\x70\x61\x6e\x79\40\163\145\x74\x20\x73\150\x6f\x77\137\163\151\x67\156\x61\164\x75\162\145\x3d\47{$show_signature}\x27\54\x63\x6f\x6d\160\x61\x6e\x79\x5f\156\x61\155\x65\75\47{$company_name}\x27\x2c\x6d\x6f\x62\x69\x6c\145\x3d\47{$mobile}\x27\x2c\x70\150\x6f\156\145\75\47{$phone}\x27\x2c\145\155\x61\x69\154\75\47{$email}\47\x2c\x63\157\165\156\164\x72\x79\75\x27{$country}\47\x2c\163\x74\x61\x74\145\75\x27{$state}\x27\x2c\x63\x69\x74\171\75\47{$city}\47\54\160\157\163\x74\143\x6f\x64\145\x3d\x27{$postcode}\47\x2c\141\144\144\x72\x65\x73\163\x3d\47{$address}\x27\x2c\x67\163\x74\137\156\157\x3d\47{$gstin}\47\x2c\166\x61\164\137\156\x6f\75\x27{$vat}\47\x2c\167\x65\x62\163\x69\x74\x65\x3d\47{$website}\47\54\40\160\141\x6e\x5f\x6e\157\75\x27{$pan}\x27\x2c\x62\x61\156\x6b\137\144\145\x74\141\151\154\163\75\47{$bank_details}\x27\54\x75\160\x69\x5f\151\144\75\47{$upi_id}\x27\x20{$company_logo}\40{$upi_code}\40{$signature}\x20\167\150\x65\162\x65\x20\151\144\x3d{$q_id}"; if ($this->db->simple_query($query1)) { return "\163\165\143\x63\145\x73\x73"; } else { return "\x66\x61\151\x6c\145\x64"; } } }